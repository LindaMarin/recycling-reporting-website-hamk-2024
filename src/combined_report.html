<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recycling Reporting</title>
    <link id="dynamic-css" rel="stylesheet" href="../parts/global.css">
    <link id="dynamic-css" rel="stylesheet" href="../parts/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"> <!-- For icons -->
    <style>
        .step {
            display: none;
        }
        .step.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../src/learn.html">Learn</a></li>
            <li><a href="../src/status_map.html">Status map</a></li>
            <li><a href="../src/report.html" class="active">Reporting</a></li>
        </ul>
        <div class="user-icon">
            <img src="/parts/user_app_basic_icon.png" />
        </div>
    </div>

    <!-- Step 1 -->
    <div id="step1" class="step active">
        <div class="container">
            <div class="address">
                <input type="text" id="addressInput" class="textbox" readonly>
                <div class="centered-medium-text">
                    <span>If the address above is not the address of<br>recycling area, choose it from below</span>
                </div>
                <div class="arrow-down">
                    <span>&#x2193;</span>
                </div>
                <select class="textbox" id="addressDropdown">
                    <option value="">Select an address</option>
                    <option value="address2">Street xx, 13100 Hml</option>
                    <option value="address3">Street xx, 13100 Hml</option>
                    <option value="address4">Street xx, 13100 Hml</option>
                </select>
            </div>
            <div class="arrow-right">
                <span>&#x2192;</span>
            </div>
        </div>
            <div class="action">
                <div class="next-button">
                    <img src="../parts/right_arrow_icon.png" alt="Next" onclick="nextStep(2)"/>
                </div>
            </div>
    </div>

    <!-- Step 3 -->
    <div id="step3" class="step">
        <div class="container">
            <div class="input-box">
                <div class="options">
                    <button id="fullbin" class="option-button" onclick="selectOption(this)">Full bins</button>
                    <button id="cleanliness" class="option-button" onclick="selectOption(this)">Cleanliness</button>
                    <button id="misssortedwaste" class="option-button" onclick="selectOption(this)">Miss sorted waste</button>
                    <button id="Labelsnotvisible" class="option-button" onclick="selectOption(this)">Labels not visible</button>
                </div>

                <div class="upload-column">
                    <h3 class="upload-title">Add Images</h3>
                    <div class="upload-buttons">
                        <label class="upload-button">
                            <i class="fas fa-camera"></i>
                            <input type="file" accept="image/*" style="display: none;" />
                        </label>
                        <label class="upload-button">
                            <i class="fas fa-image"></i>
                            <input type="file" accept="image/*" style="display: none;" />
                        </label>
                    </div>
                </div>

                <div class="text-content">
                    <h3 class="comment-title">Comments</h3>
                    <textarea rows="5" maxlength="1000" placeholder="Type your comments here..."></textarea>
                </div>
            </div>
            <div class="action">
                <div class="previous-button">
                    <img src="../parts/left_arrow_icon.png" alt="Previous" onclick="prevStep(3)"/>
                </div>
                <div class="next-button">
                    <img src="../parts/right_arrow_icon.png" alt="Next" onclick="nextStep(3)"/>
                </div>
            </div>
        </div>
    </div>

    <!-- Step 4 -->
    <div id="step4" class="step">
        <div class="container">
            <div class="input-box">
                <div class="heading3">Send the report</div>
                <div class="main-text">How would you like to submit this report?</div>
                <ul class="options">
                    <li>
                        <input type="radio" id="registered" name="report" value="registered">
                        <label for="registered">As a registered user</label>
                    </li>
                    <li>
                        <input type="radio" id="anonymous" name="report" value="anonymous">
                        <label for="anonymous">As an anonymous</label>
                    </li>
                    <li>
                        <input type="radio" id="hide" name="report" value="hide">
                        <label for="hide">Hide your personal information</label>
                    </li>
                </ul>
            </div>
            <!-- Action Buttons Centered Below Content -->
            <div class="action">
                <div class="previous-button">
                    <img src="../parts/left_arrow_icon.png" alt="Previous" onclick="prevStep(4)"/>
                </div>
                <div class="finish-next">
                    <div class="finish-text">FINISH</div>
                    <div class="next-button">
                        <img src="../parts/right_arrow_icon.png" alt="Next" onclick="nextStep(4)"/>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        Footer
    </div>

    <script>
        // JavaScript to handle steps navigation and dynamically change CSS
        function nextStep(currentStep) {
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById(`step${currentStep + 1}`).classList.add('active');
            updateStepCSS(currentStep + 1);
        }

        function prevStep(currentStep) {
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById(`step${currentStep - 1}`).classList.add('active');
            updateStepCSS(currentStep - 1);
        }

        function updateStepCSS(stepNumber) {
            const cssLink = document.getElementById('dynamic-css');
            if (stepNumber === 1) {
                cssLink.href = '../parts/style_reporting_step1';
            } else if (stepNumber === 3) {
                cssLink.href = '../parts/style_reporting_step3';
            } else if (stepNumber === 4) {
                cssLink.href = '../parts/style_reporting_step4';
            }
        }

        function selectOption(selectedButton) {
            const buttons = document.querySelectorAll('.option-button');
            buttons.forEach(button => {
                button.classList.remove('active');
            });
            selectedButton.classList.add('active');
            console.log('Selected option:', selectedButton.textContent);
        }

        function submitReport() {
            alert('Report Submitted!');
            // Add form submission logic
        }

        // JavaScript to extract address from URL and set it in the textbox (Step 1)
        window.onload = function() {
            const urlHash = window.location.hash;
            if (urlHash) {
                const address = decodeURIComponent(urlHash.substring(1));
                const addressInput = document.getElementById('addressInput');
                addressInput.value = address;
            } else {
                const addressInput = document.getElementById('addressInput');
                addressInput.value = "Street xx, 13100 Hml"; // Default value
            }
        };
    </script>
</body>
</html>
